≪シェルエクスプローラ通≫ ver 1.1.0

顔画像・立ち絵表示付きのシェルエクスプローラです。
「ゴーストエクスプローラ通」のオマケです。

・立ち絵の生成処理を独自エンジン（偽SERIKO）で実装しているため、
  シェルによっては立ち絵を正しく表示できないかもしれません。
  もし表示できないゴーストがいたらご連絡ください。対応できそうであれば対応します。
  (シェル側の立ち絵定義内容が著しく仕様に沿っていないような場合は、対応しない場合があります)

作者: ポン
Webサイト : http://sakura.morphball.net/explorer2/
Twitter: https://twitter.com/tetradice
Ukadon: https://ukadon.shillest.net/web/accounts/29648
ソース (Github) : https://github.com/tetradice/ukagaka_explorer2

****************

■動作詳細

・ゴースト側での着せ替え変更の内容も反映されます。



■動作詳細（シェル作者さん向け）

・シェルのフォルダ内に explorer2\character_descript.txt を置くと、ゴースト選択時に、そのテキストファイルの内容を
  シェルの説明文として表示します。キャラクター紹介のようなノリで書いてください。

    ※テキストファイルのエンコーディングは【UTF-8】である必要があります
      （シフトJISは不可であることに注意してください）

・起動時に、ゴースト側で OnShellExplorer2Open イベントを発生させます。（Referenceなし）


・特に指定がなければ、通常は0番, 10番のサーフェスを立ち絵として表示しようとします。
  他の番号(ID)のサーフェスを表示させたい場合は、下記のどちらかでデフォルトサーフェスIDを指定してください。
  
    ・ghost\master\explorer2\descript.txt を作成し、その中で下記のように指定　　※シェルエクスプローラ通でのみ有効
        
        sakura.defaultsurface,100
        kero.defaultsurface,200
        
    ・ghost\master\descript.txt の中で下記のように指定　　※SSP、シェルエクスプローラ通の両方で有効
        
        sakura.seriko.defaultsurface,100
        kero.seriko.defaultsurface,200

・シェルのフォルダ内に explorer2\descript.txt を置き、下記のように記載すると、
  「立ち絵画像のうち、どこからどこまでの範囲を顔画像として表示するか」を指定することができます。
  
    face.left,28
    face.top,28
    face.width,192
    face.height,160

  left, topで左上原点を指定し、width, heightで幅と高さを指定します。
  できる限り幅と高さが同じサイズ（1:1）になるようにしてください。
  （実際に表示する顔画像のサイズは、幅120px × 高さ120pxです）



■現時点での制限事項

・他シェルへ切り替えた時のイベントトークは、SSP バージョン 2.4.74 (2020/6/9リリース版) 以降でのみ発生します。

・SERIKOの描画メソッドのうち、正しく処理できるのは、基本的な重ね合わせメソッド (base, overlay, overlayfast, add, bind) 、および reduce, interpolate のみです。
  他の描画メソッドは、moveは無視し、それ以外はすべてoverlay扱いで描画します。

・SERIKOの機能のうち、下記のものには対応できていません。
  ・animation*.option,background



■ライセンス（利用条件）

シェルエクスプローラ通を再配布する場合、変更なしでの再配布は個人/商用を問わず、自由に行っていただくことが可能です。

一部流用や改変などを行う場合の条件は、シェルエクスプローラ通の中に含んでいるライブラリの条件に従います。
詳細は同梱の license.txt を参照してください。



■更新履歴

2020/9/22 ver 1.1.0 リリース

* [修正] シェルフォルダが隠しフォルダになっている場合にも、シェルが表示されてしまう不具合を修正
         ※SSPやmateriaの動作に合わせた
* [修正] 一部ゴーストの立ち絵を正しく処理できない不具合を修正
           - surfaces.txt 内のanimation定義で、描画メソッドに「move」を含むサーフェスを正しく描画できていなかった

2020/9/21 ver 1.0.2 リリース

* [修正] ゴーストエクスプローラ通と同時にインストールしている場合や、複数バージョンを同時にインストールした場合に、エラーで落ちる場合がある不具合を修正
* [内部的変更] ver 0.3.2 以前と同様に、YAYA as PLUGINを使用する構成に戻した（SakuraBridgeを廃止）

2020/9/20 ver 1.0.0 リリース

* [機能追加] オプション画面から、シェルエクスプローラ通のreadme.txtを閲覧できるようにした
* [修正] 一部ゴーストの立ち絵を正しく処理できない不具合を修正
           - surfaces.txt 内の記述で「element1, overlay, surface0.png, 0, 0」のように空白が入っている場合、正しく処理できていなかった
* [内部的変更] descript.txtにcraftmanurlを追記（SSPからプラグインのreadme.txtを開いた時に、配布サイトへ飛べるようになった）
* [内部的変更] 画像処理エンジン（偽SERIKO）の処理を変更し、使用するライブラリを差し替え
               基本的にゴーストエクスプローラ通への影響はないはずですが、もしかすると今までと表示結果が変わっているゴーストがいるかもしれません


2020/6/13 ver 0.5.0 β版リリース

* [変更] SSP バージョン 2.4.74 以降でのみ、シェル切り替え時のイベントトークが発生するようにした

2020/6/7 ver 0.4.0 β版リリース

* [機能追加] SERIKOのreduce, interpolateメソッドに対応
* [機能追加] ゴースト側の explorer2\descript.txt でもデフォルトサーフェスIDを指定できるようにした
* [変更] シェル切り替え時のトークが発生するようにした
* [変更] 立ち絵を表示できない場合のエラーメッセージを、以前より具体的に表示するようにした
* [変更] シェルエクスプローラ通がサポート対象外とするゴーストの場合、「ERROR: 〜」ではなく「UNSUPPORTED: 〜」形式でメッセージを表示するように変更
         現時点では下記のものが該当
           - 暗号化PNG (拡張子が .dap, .ddp, .dfp, .dgp 形式の画像ファイル) を使っているゴースト
           - sakura側のデフォルトサーフェス (通常はID=0、descript.txtの記載により変更可) が存在しないゴースト
           - pngとpnaのサイズが異なり、かつ縦幅と横幅が矛盾している (片方は大きいのに片方は小さい) ゴースト

* [修正] 一部ゴーストの立ち絵を正しく処理できない不具合を修正
           - intervalにalwaysが指定されているアニメーションを処理できていなかった
           - サーフェスID=0にエイリアスを指定しているシェルを、正しく処理できていなかった
           - 着せ替えのaddid指定を正しく処理できていなかった
           - 着せ替えの座標指定が正しく反映されない場合があった
           - 着せ替えで2つのサイズが異なるサーフェスを重ねた時に、透明色部分の透過処理が正しく行われない場合があった
           - pngとpnaのサイズが違っていても正しく処理できるようにした（仕様上は不正だが、SSPは正常に表示できる）
           - surfaces.txt 内で、offsetX, offsetYに数値でない値（不正値）が設定されている場合にも正しく処理できるようにした

* [内部的変更] β版リリースに伴い、プラグインのファイル構成を変更
* [内部的変更] ライセンス（利用条件）を整備して、本体部分はNYSLで自由に再配布・再利用できるようにした（添付ライブラリ MagickK.NET を除く）


2020/5/27 ver 0.3.2
* [修正] 一部ゴーストの立ち絵を正しく処理できない不具合を修正
           - 1つの surfaces.txt 内に、SERIKO V1, V2の記述形式が混在していても正しく処理できるようにした（仕様上は不正だが、SSPは正常に表示できる）
           - surfaces.txt 内で、1つのサーフェス定義内に "element0" が複数記述されている場合にも
             正しく処理できるようにした（仕様上は不正だが、SSPは正常に表示できる）
* [修正] "[ ametone ]" のように、シェル名の中に[]記号が含まれるシェルへの切り替えが行えない不具合を修正


2020/5/25  ver 0.3.1
* [修正] 複数のゴーストでシェルエクスプローラを立ち上げたときに、シェルが正しく表示されない不具合を修正
         (キャッシュ処理関連の不具合)


2020/5/24 ver 0.3.0
* α版公開（ゴーストエクスプローラ通のオマケとして）
